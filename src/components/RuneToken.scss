@use 'sass:color';
@use 'sass:math';

$rune-basic-colour: #CCC;
$rune-picked-colour: #91cdff;
$rune-complete-colour: #22C55E;
// $rune-basic-colour: theme('colors.gray.200'); TODO how?
// $rune-picked-colour: theme('colors.blue.200');
// $rune-completed-colour: theme('colors.green.200');

@mixin vertical-hexagon {
    clip-path: polygon(
        #{math.sin(0) * 50 + 50%} #{math.cos(0) * 50 + 50%},
        #{math.sin(60deg) * 50 + 50%} #{math.cos(60deg) * 50 + 50%},
        #{math.sin(120deg) * 50 + 50%} #{math.cos(120deg) * 50 + 50%},
        #{math.sin(180deg) * 50 + 50%} #{math.cos(180deg) * 50 + 50%},
        #{math.sin(240deg) * 50 + 50%} #{math.cos(240deg) * 50 + 50%},
        #{math.sin(300deg) * 50 + 50%} #{math.cos(300deg) * 50 + 50%},
    );
}

.rune-token {
    --rune-size: 6em;
    --rune-text-size: 1.5rem;
    --rune-border-width: 0.25em;

    /* Our tokens are a vertical hexagon shape. */
    border: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    position: relative;
    height: var(--rune-size);
    width: var(--rune-size);

    &:not(.complete,.picked) {
        opacity: 0.4;
    }

    // Pseudo-elements for the hexagon shape.
    &::before,
    &::after {
        @include vertical-hexagon();
        content: "";
        display: block;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
    }

    &::before {
        // Represents the border colour.
        background: color.adjust($rune-basic-colour, $lightness: -10%);
        z-index: 0;
    }

    &::after {
        // Represents the background colour.
        background: $rune-basic-colour;
        top: var(--rune-border-width);
        bottom: var(--rune-border-width);
        left: var(--rune-border-width);
        right: var(--rune-border-width);
        z-index: 1;
    }

    &:not(.complete) {
        &:focus,
        &:hover {
            filter: brightness(110%);
        }
    }

    &.picked {
        &::before {
            background: color.adjust($rune-picked-colour, $lightness: -10%);
        }
        &::after {
            background: $rune-picked-colour;
        }
    }

    &.complete {
        &::before {
            background: color.adjust($rune-complete-colour, $lightness: -10%);
        }
        &::after {
            background: $rune-complete-colour;
        }
    }
}

.rune-token-number {
    font-size: var(--rune-text-size);
    font-weight: bold;
    text-align: center;
    z-index: 2;
}